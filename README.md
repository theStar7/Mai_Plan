# Mai_Plan (éº¦éº¦è®¡åˆ’è¡¨)

**Mai_Plan** æ˜¯é¢å‘ MaiBot çš„æ™ºèƒ½æ—¥ç¨‹æé†’æ’ä»¶ã€‚å®ƒä¸ä»…èƒ½å¬æ‡‚ä½ çš„æ˜¾å¼æŒ‡ä»¤ï¼Œè¿˜èƒ½æ•é”æ•æ‰é—²èŠä¸­çš„æœªæ¥å®‰æ’ã€é‡è¦æ—¶åˆ»æˆ–æ¨¡ç³Šçº¦å®šï¼Œè‡ªåŠ¨ä¸ºä½ åˆ›å»ºè®¡åˆ’å¹¶åœ¨åˆé€‚çš„æ—¶é—´å‘å‡ºæé†’ã€‚

å³è£…å³ç”¨å‘Šåˆ«é—å¿˜ï¼Œè®©éº¦éº¦æˆä¸ºä½ çš„è´´èº«æ—¥ç¨‹ç®¡å®¶ã€‚

## âœ¨ æ ¸å¿ƒåŠŸèƒ½ (Features)

### 1. æ™ºèƒ½è®¡åˆ’æ„ŸçŸ¥
æ’ä»¶ä¸ä»…ä»…æ˜¯è¢«åŠ¨è®°å½•ï¼Œæ›´èƒ½ä¸»åŠ¨è¯†åˆ«å¤šç§åœºæ™¯ï¼š
- **æ˜ç¡®æé†’**ï¼šç›´æ¥å¤„ç†â€œæé†’æˆ‘æ˜å¤©å¼€ä¼šâ€ã€â€œå‘¨äº”æ™šä¸Š8ç‚¹å»æ‹¿å¿«é€’â€ç­‰æŒ‡ä»¤ã€‚
- **æ¨¡ç³Šæ—¶é—´æ¨æ–­**ï¼šå½“ä½ è¯´â€œæ˜å¤©ä¸‹åˆå»ç©â€æ—¶ï¼Œè‡ªåŠ¨æ¨ç®—åˆç†çš„æé†’æ—¶é—´ï¼ˆå¦‚ 14:00ï¼‰ã€‚
- **é‡è¦æ—¶åˆ»ä»¥å¤‡**ï¼šè¯†åˆ«ç”Ÿæ—¥ã€çºªå¿µæ—¥ã€è€ƒè¯•ç­‰è¯é¢˜ï¼Œå¹¶åœ¨å‰ä¸€æ™šæˆ–å½“å¤©æ—©æ™¨ä¸»åŠ¨å®‰æ’å…³æ€€æé†’ã€‚
- **å…¬å…±äº‹ä»¶è·Ÿè¿›**ï¼šæåŠæ¸¸æˆå‘å”®ã€ç”µå½±ä¸Šæ˜ æ—¶ï¼Œè‡ªåŠ¨åˆ›å»ºæé†’ä»¥ä¾¿å±Šæ—¶è·Ÿè¿›è®¨è®ºã€‚
- **è¯é¢˜å»¶ç»­**ï¼šå½“èŠå¤©ä¸­æ–­è¯´â€œä¸‹æ¬¡å†èŠâ€æ—¶ï¼Œå°è¯•å®‰æ’ç»­èŠæé†’ï¼Œè®©è¯é¢˜ä¸æ‰åœ°ã€‚

### 2. å¤šç»´åº¦ä»»åŠ¡ç®¡ç†
- **è‡ªåŠ¨åˆ›å»º**ï¼šåŸºäº LLM çš„è¯­ä¹‰ç†è§£ï¼Œè‡ªåŠ¨æå–ä»»åŠ¡å†…å®¹ä¸æ—¶é—´ã€‚
- **å‘½ä»¤ç®¡ç†**ï¼šæä¾›æŒ‡ä»¤å³æ—¶æŸ¥çœ‹æˆ–å–æ¶ˆä»»åŠ¡ã€‚
- **æœ¬åœ°æŒä¹…åŒ–**ï¼šä»»åŠ¡æ•°æ®å®‰å…¨å­˜å‚¨äºæœ¬åœ°ï¼Œé‡å¯ä¸ä¸¢å¤±ã€‚

### 3. çµæ´»çš„æé†’æœºåˆ¶
- **å®šæ—¶å‘é€**ï¼šé€šè¿‡åå°è°ƒåº¦å™¨å‡†æ—¶æ¨é€æé†’ã€‚
- **é‡è¯•æœºåˆ¶**ï¼šå‘é€å¤±è´¥è‡ªåŠ¨é‡è¯•ï¼Œç¡®ä¿æ¶ˆæ¯è§¦è¾¾ã€‚
- **å¤šåœºæ™¯æ”¯æŒ**ï¼šæ”¯æŒç¾¤èŠä¸ç§èŠï¼Œå¯é…ç½®ä¸åŒçš„ç”Ÿæ•ˆèŒƒå›´ã€‚

---

## ğŸ“– ä½¿ç”¨è¯´æ˜ (Usage)

### è‡ªç„¶è¯­è¨€äº¤äº’ (æ¨è)
ä½ ä¸éœ€è¦è®°å¿†å¤æ‚çš„æŒ‡ä»¤ï¼Œåªéœ€åƒå¾€å¸¸ä¸€æ ·èŠå¤©ï¼š

> **ç”¨æˆ·**ï¼šéº¦éº¦ï¼Œæé†’æˆ‘æ˜æ—©9ç‚¹æäº¤å‘¨æŠ¥ã€‚  
> **Mai_Bot**ï¼šå¥½çš„ï¼Œå·²ä¸ºæ‚¨åˆ›å»ºè®¡åˆ’ï¼š[æäº¤å‘¨æŠ¥]ï¼Œå°†åœ¨ 2026-03-01 09:00:00 æé†’æ‚¨ã€‚

> **ç”¨æˆ·**ï¼šä¸‹å‘¨äº”å°±æ˜¯æˆ‘ç”Ÿæ—¥äº†ï¼  
> **Mai_Bot**ï¼š(è‡ªåŠ¨è®°å½•ï¼Œå¹¶å¯èƒ½åœ¨å‘¨å››æ™šæˆ–å‘¨äº”æ—©æ™¨æé†’ç¥è´º)

> **ç”¨æˆ·**ï¼šæ¯éš”ä¸€ä¸ªå°æ—¶æé†’æˆ‘å–æ°´ã€‚  
> **Mai_Bot**ï¼š(è‡ªåŠ¨åˆ›å»ºä¸€ä¸ªæ¯å°æ—¶é‡å¤çš„å–æ°´æé†’) 

> **ç”¨æˆ·**ï¼šä¸ç”¨æé†’æˆ‘æ‹¿å¿«é€’äº†ï¼Œå·²ç»æ‹¿åˆ°äº†ã€‚  
> **Mai_Bot**ï¼šå¥½çš„ï¼Œå·²ä¸ºæ‚¨å–æ¶ˆä»»åŠ¡ï¼š[æ™šä¸Š8ç‚¹æ‹¿å¿«é€’]ã€‚

> **ç”¨æˆ·**ï¼šæŠŠæ˜æ—©çš„å‘¨æŠ¥æé†’æ”¹åˆ°ä¸‹åˆ2ç‚¹å§ã€‚  
> **Mai_Bot**ï¼šæ˜ç™½ï¼Œå·²å°†[æäº¤å‘¨æŠ¥]çš„æé†’æ—¶é—´ä¿®æ”¹ä¸º 2026-03-01 14:00:00ã€‚

### æŒ‡ä»¤æ§åˆ¶
æ’ä»¶æä¾›äº†ä¸€ç»„ç®¡ç†å‘½ä»¤ï¼Œç”¨äºæŸ¥è¯¢å’Œæ§åˆ¶ä»»åŠ¡çŠ¶æ€ã€‚

| å‘½ä»¤ | å‚æ•° | è¯´æ˜ | ç¤ºä¾‹ |
| :--- | :--- | :--- | :--- |
| `/mai_plan list` | `[pending\|all]` | <br>`pending`: æŸ¥çœ‹å½“å‰ä¼šè¯ä»»åŠ¡(é»˜è®¤)<br>`all`: æŸ¥çœ‹æ‰€æœ‰ä»»åŠ¡(ä»…é™ç®¡ç†å‘˜) | `/mai_plan list` |
| `/mai_plan cancel` | `<task_id>` | å–æ¶ˆæŒ‡å®š ID çš„ä»»åŠ¡ | `/mai_plan cancel p_20260228_a1b2` |

---

## âš™ï¸ é…ç½®è¯´æ˜ (Configuration)

é…ç½®æ–‡ä»¶ä½äºæ’ä»¶ç›®å½•ä¸‹çš„ `config.toml`ã€‚é¦–æ¬¡è¿è¡Œä¼šè‡ªåŠ¨ç”Ÿæˆé»˜è®¤é…ç½®ã€‚

```toml
[scope]
group = true        # æ˜¯å¦åœ¨ç¾¤èŠä¸­å¯ç”¨
private = true      # æ˜¯å¦åœ¨ç§èŠä¸­å¯ç”¨

[time]
format = "%Y-%m-%d %H:%M:%S" # å†…éƒ¨æ—¶é—´æ ¼å¼

[reminder]
send_mode = "origin_chat"   # æé†’å‘é€æ¨¡å¼: origin_chat(åŸè·¯è¿”å›) / private_first(ä¼˜å…ˆç§èŠ)
prefix = "[è®¡åˆ’æé†’]"     # æé†’æ¶ˆæ¯çš„å‰ç¼€
notify_on_create = true     # åˆ›å»ºæˆåŠŸæ—¶æ˜¯å¦å‘é€æç¤ºæ¶ˆæ¯

[permission]
admin_user_ids = []         # ç®¡ç†å‘˜IDåˆ—è¡¨ï¼Œæ‹¥æœ‰å–æ¶ˆä»»æ„ä»»åŠ¡çš„æƒé™
```

## ğŸ› ï¸ å®‰è£…ä¸ä¾èµ–

1. ç¡®ä¿ MaiBot ç‰ˆæœ¬ `>= 0.12.1`ã€‚
2. å°†æœ¬æ’ä»¶æ–‡ä»¶å¤¹æ”¾å…¥ `MaiBot/plugins/` ç›®å½•ã€‚
3. é‡å¯ MaiBotï¼Œæ’ä»¶å°†è‡ªåŠ¨åŠ è½½ã€‚
4. å³è£…å³ç”¨ï¼Œæœ¬æ’ä»¶ä¾èµ– MaiBot æ ¸å¿ƒç¯å¢ƒï¼Œ**æ— éœ€**å®‰è£…é¢å¤– Python åŒ…ã€‚

## ğŸ’¾ æ•°æ®å­˜å‚¨
ä»»åŠ¡æ•°æ®é»˜è®¤å­˜å‚¨åœ¨ `plan_tasks.json` æ–‡ä»¶ä¸­ã€‚åŒ…å«ä»»åŠ¡ IDã€å†…å®¹ã€æé†’æ—¶é—´åŠå½“å‰çŠ¶æ€ï¼ˆpending/sent/failed/cancelledï¼‰ã€‚
å†å²ä»»åŠ¡å‚¨å­˜åœ¨ `plan_tasks_history.json` ä¸­ã€‚
è¯¦ç»†ç»“æ„ç¤ºä¾‹ï¼š
```json
{
  "version": "1.0.0",
  "tasks": [
    {
      "task_id": "p_20260226_ab12cd34",
      "chat_id": "stream_xxx",
      "content": "æ˜å¤©æäº¤å‘¨æŠ¥",
      "remind_at": "2026-02-27 09:00:00",
      "status": "pending"
    }
  ]
}
```

çŠ¶æ€è¯´æ˜ï¼š
- `pending` å¾…æé†’
- `sent` å·²æé†’
- `failed` å¤±è´¥
- `cancelled` å·²å–æ¶ˆ

## æƒé™è§„åˆ™
- ä»»åŠ¡åˆ›å»ºè€…å¯å–æ¶ˆè‡ªå·±çš„ä»»åŠ¡
- ç®¡ç†å‘˜å¯æŸ¥çœ‹æ‰€æœ‰ä»»åŠ¡ï¼ˆ`/mai_plan list all`ï¼‰
- ç®¡ç†å‘˜å¯å–æ¶ˆä»»æ„ä»»åŠ¡ï¼ˆ`permission.admin_user_ids`ï¼‰